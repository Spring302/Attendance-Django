# 원티드랩 Python 개발자 면접 과제

## 실행방법

docker-compose up -d

## 시스템 구성

- Backend : Django (Django Rest Framework)
- DB : PostgreSQL
- Infra : Docker

## 데이터베이스 설계

[record ERD](https://www.erdcloud.com/d/RACtxBeL3C63ePSM8)

## API 설계

| INDEX | METHOD | URL                    | DESCRIPTION          |
| ----- | ------ | ---------------------- | -------------------- |
| 1     | GET    | /access                | 출입기록 리스트 조회 |
| 2     | POST   | /access                | 출입기록 작성        |
| 3     | GET    | /access/{id}           | ID별 출입기록 조회   |
| 4     | PUT    | /access/{id}           | ID별 출입기록 수정   |
| 5     | DELETE | /access/{id}           | ID별 출입기록 삭제   |
| 6     | GET    | /access/user/{user_id} | 유저별 출입기록 조회 |
| 7     | GET    | /daily                 | 일별기록 리스트 조회 |
| 8     | POST   | /daily                 | 일별기록 작성        |
| 9     | GET    | /daily/{id}            | ID별 일별기록 조회   |
| 10    | PUT    | /daily/{id}            | ID별 일별기록 수정   |
| 11    | DELETE | /daily/{id}            | ID별 일별기록 삭제   |
| 12    | GET    | /daily/user/{user_id}  | 유저별 일별기록 조회 |

## API 접근 관리자 계정

- ID: root
- PASSWORD : root

## 요구사항

게이트 출입 기록을 통해 직원들의 일별 근무시간과 휴게시간을 기록하려고 합니다.

개인별로 등록된 카드키를 통해 게이트를 출입하게 되며, 입구와 출구가 분리되어 각각 IN, OUT 태그와 시간을 함께 기록할 수 있습니다.

출퇴근 기록이 되면 일별로 근무시간이 기록됩니다.

- 출근은 하루 중 가장 먼저 들어온 시간, 퇴근은 하루 중 가장 마지막으로 나간 시간입니다.
- 하루 중 사무실에 들어와서 나간 시간까지의 합이 근무시간이며, 근무 시간 중에 나가있었던 시간은 휴게시간이 됩니다.
- 하루의 기준은 오전6시에서 다음 날 오전 6시까지입니다.
- 직원들은 종종 태그를 찍지 않고 출입합니다.

## 유의 조건 처리

1. 직원들은 종종 태그를 찍지 않고 출입합니다.
    - CASE 1: 출입 (IN) 기록 후 (OUT) 기록을 하지 않고 다시 (IN) 하는 경우
        - 변동사항없음
    - CASE 2: (OUT) 기록 후 (IN) 기록을 하지 않고 다시 (OUT) 하는 경우
        - 퇴근시간만 현재시간으로 변경
    - CASE 3: (IN) 기록 후 (OUT) 기록을 하지 않고 다음 날 오전 6시가 지난경우
        - 퇴근시간이 NULL
    - CASE 4: 출근 시 (IN)을 하지 않고 퇴근 (OUT)만 기록한경우
        - 출근시간을 퇴근시간과 같도록 처리

    ⇒ 해당 예외사항들은 접근 기록을 관리자 권한에서 API를 통해 수정 할 수 있도록 구현(API INDEX 4)

2. 관리자가 미래 시점의 기록을 생성하는 경우
    - 원칙적으로 금지하도록 구현(Bad Request)

3. 하루의 기준은 오전 6시에서 다음 날 오전 6시 까지입니다.
    - CASE 1: 오전 3시에 출입하는 경우
        - 어제 날짜에 출퇴근 기록이 되도록 구성

## 감사합니다

귀 사의 코딩 면접 기회를 주셔서 감사드립니다.
본 테스트를 통해 많은 경험을 할 수 있었고
앞으로의 방향에 대해 많은 깨달음을 얻을 수 있었습니다.
귀 사의 무궁한 발전을 기원드리며 다음 면접 때 뵐 수 있기를 기대하겠습니다.
감사합니다.